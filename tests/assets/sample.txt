scenario Brakes: Replicator

# comments
{{ print('Code snippet!') }}

settings:
  souce = a == 5
  fpsss = 30 - 10 + 10 + 3 *(5+5)
  render_mode = 'PathTracing'
  num_scenes = 100
  root_path = '/path/to/root'

stage:  
  open '*/scenario.usd'

  edit Timeline:
    start_frame 90
    end_frame 120
  
  brake_models = fetch 'usd' from '*/models/' match 'brake_'
  
  obj = create 5 from brake_models :
    translate to <0,0,0>
    translate x to 50
    rotate <120,0,90>
    scale <2, 1, 2>
    semantics 'class:obj'
    
    collider
    kinematics:
      velocity 150

  create Light:
    type 'disk'
    radius:float 100
    
    every frame:
      color <0,0, 250>


  camera = get camera at '/World/Room':
    exclude '/World/Room/CameraTop' 

  edit camera:
    translate to <0,0,0>
    rotate 90
    rotate_around obj:
      radius Normal(100,5)

  every $num_scenes / 2 frame:
    edit obj:
      visibility Choice([true, false])
      translate to Combine(Uniform(10,20), 0, Uniform(10,20))

    instantiate 5 from '*/props':
      translate to Uniform(<-10,-10,10>, <10,10,10>)

writers:
  intrinsics = [[0, 0, 0], 
                [0, 0, 0], 
                [0, 0, 0]]
  
  DOPEWriter:
    pose = true
    intrinsics = intrinsics

  KittiWriter:
    bounding_box_2d = true
