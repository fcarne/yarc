scenario Brakes: Replicator

# comments
{{ print('Code snippet!') }}

settings:
  fps = 30 + 3 *(5+5)
  render_mode = 'PathTracing'
  num_scenes = 100
  root_path = '/path/to/root'

stage:  
  open '*/scenario.usd'

  models = fetch 'usd' from '*/models/' match 'Albedo'
  count = 5
  obj = create from '*/obj.blend' :
    translate to <0,0,0>
    translate x to 50
    rotate <120,0,90> xyz
    scale <2, 1, 2>
    semantics 'class:obj'
    collider
    mass 150

  
  group [cube, cone, sphere]:
    scale 100

  camera = get Light at 'Cucina':
    exclude 'Cucina/Forno'
    include_semantics 'class:light'

  edit camera:
    translate to <0,0,0>
    rotate 90

  every $num_scenes / 2 frame:
    edit obj:
      visibility Choice([true, false])

    edit camera: 
      look_at obj

    edit light:
      camera_translate to [0,0, 250]

    instantiate 5 from '*/props':
      translate to Uniform(-10, 10)

writers:
  intrinsics = [[0, 0, 0], 
                [0, 0, 0], 
                [0, 0, 0]]
  
  DOPEWriter:
    pose = true
    intrinsics = intrinsics

  KittiWriter:
    bounding_box_2d = true
